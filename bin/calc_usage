#!/usr/bin/env python3
import sys
import os
import argparse

# discover paths
scriptpath = os.path.dirname(__file__)
modpath = os.path.abspath(os.path.join(scriptpath, os.pardir))
os.chdir(modpath)
sys.path.append(modpath)

SITTINGSDIR = os.path.join(modpath, 'data/ano')
CSVDIR=os.path.join(modpath, 'data/csv')

# get commandline parameters and mix everything
parser = argparse.ArgumentParser(description='Calculate Usage info from the sittings files.')
parser.add_argument("--sdir", type=str, default=os.environ.get("SITTINGSDIR", SITTINGSDIR), help="sitting directory")
parser.add_argument("--cdir", type=str, default=os.environ.get("CSVDIR", CSVDIR), help="csv directory")
parser.add_argument("--debug", type=bool,  default=False, help="output debugging information")
args = parser.parse_args()

debug = False
if args.debug:
    debug = True

if __name__ == "__main__":
    from ana.sittings2usage import sli_usage, generate_csv
    np = sli_usage(args.sdir)
    generate_csv(np, args.cdir)
